{"title":"Flutter的Windows套件 - webview_windows (2)","uid":"84a3161f68ac38ab4f5232fe7866e550","slug":"flutter-webview-windows-2","date":"2021-10-13T06:37:03.000Z","updated":"2022-03-09T05:46:24.861Z","comments":true,"path":"api/articles/flutter-webview-windows-2.json","keywords":"Flutter, Dart, MSIX, webview_windows, Javascript, Web, VBA, Excel","cover":"https://i.imgur.com/ZfztlMU.gif","content":"<p>前幾天介紹了webview_windows的<a href=\"https://cailirl980519.github.io/2021/10/07/flutter-webview-windows/\">基本使用</a>，我們已經學會了如何在Flutter App裡開啟網頁，但通常如果是開啟自己的網頁的話，可能有些Web功能就需要跟Flutter端溝通。<br>今天要來學習如何運用<a href=\"https://pub.dev/packages/webview_windows\">webview_windows</a>來接收網頁的訊息及從Flutter傳訊息至Web端。</p>\n<h3 id=\"前置作業\"><a href=\"#前置作業\" class=\"headerlink\" title=\"前置作業\"></a>前置作業</h3><ul>\n<li>引入<code>webview_windows</code>套件</li>\n<li>創建一個需要溝通的html檔<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>以下是這次範例所使用的html</p></blockquote>\n<pre class=\"line-numbers language-html\" data-language=\"html\"><code class=\"language-html\">&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n\t&lt;meta charset&#x3D;&quot;utf-8&quot;&gt;\n    &lt;link href&#x3D;&quot;https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;npm&#x2F;bootstrap@5.0.2&#x2F;dist&#x2F;css&#x2F;bootstrap.min.css&quot; rel&#x3D;&quot;stylesheet&quot; integrity&#x3D;&quot;sha384-EVSTQN3&#x2F;azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC&quot; crossorigin&#x3D;&quot;anonymous&quot;&gt;\n\t&lt;title&gt;WebView Sample for Windows&lt;&#x2F;title&gt;\n&lt;&#x2F;head&gt;\n&lt;body&gt;\n    &lt;h1 class&#x3D;&quot;text-center&quot;&gt;Communicate With Flutter&lt;&#x2F;h1&gt;\n    &lt;div&gt;\n        &lt;script src&#x3D;&quot;https:&#x2F;&#x2F;unpkg.com&#x2F;@lottiefiles&#x2F;lottie-player@latest&#x2F;dist&#x2F;lottie-player.js&quot;&gt;&lt;&#x2F;script&gt;\n        &lt;lottie-player class&#x3D;&quot;mx-auto&quot; src&#x3D;&quot;https:&#x2F;&#x2F;assets1.lottiefiles.com&#x2F;packages&#x2F;lf20_zwykwl1i.json&quot;  background&#x3D;&quot;transparent&quot;  speed&#x3D;&quot;1&quot;  style&#x3D;&quot;width: 300px; height: 300px;&quot;  loop autoplay&gt;&lt;&#x2F;lottie-player&gt;\n    &lt;&#x2F;div&gt;\n    &lt;div class&#x3D;&quot;row justify-content-around&quot;&gt;\n        &lt;div class&#x3D;&quot;col-5&quot;&gt;\n            &lt;h3&gt;Example 1.&lt;&#x2F;h3&gt;\n            &lt;input id&#x3D;&quot;web_message&quot; class&#x3D;&quot;w-100 mb-2&quot; type&#x3D;&quot;text&quot; value&#x3D;&quot;Hi! I&#39;m web message.&quot;&gt;\n            &lt;button type&#x3D;&quot;button&quot; class&#x3D;&quot;btn btn-primary&quot; onclick&#x3D;&quot;sendMessage()&quot;&gt;Send Message to Flutter&lt;&#x2F;button&gt;\n        &lt;&#x2F;div&gt;\n        &lt;div class&#x3D;&quot;col-5&quot;&gt;\n            &lt;h3&gt;Example 2.&lt;&#x2F;h3&gt;\n            &lt;p&gt;Message from Dart:&lt;&#x2F;p&gt;\n            &lt;textarea id&#x3D;&quot;flutter&quot; class&#x3D;&quot;w-100&quot; disabled&#x3D;&quot;true&quot; style&#x3D;&quot;height: 30vw;&quot;&gt;&lt;&#x2F;textarea&gt;\n        &lt;&#x2F;div&gt;\n    &lt;&#x2F;div&gt;\n&lt;&#x2F;body&gt;\n&lt;&#x2F;html&gt;</code></pre>\n<h3 id=\"Web-to-Flutter-將Web訊息傳至Flutter\"><a href=\"#Web-to-Flutter-將Web訊息傳至Flutter\" class=\"headerlink\" title=\"Web to Flutter - 將Web訊息傳至Flutter\"></a>Web to Flutter - 將Web訊息傳至Flutter</h3></li>\n</ul>\n<h4 id=\"Web端\"><a href=\"#Web端\" class=\"headerlink\" title=\"Web端\"></a>Web端</h4><p>在JavaScipt內加入function <code>sendMessage()</code></p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\">const message &#x3D; document.getElementById(&quot;web_message&quot;) &#x2F;&#x2F; 輸入文字的input元件\nfunction sendMessage() &#123;\n    &#x2F;&#x2F; 若無Flutter通道則不動作\n    if (window.chrome &#x3D;&#x3D;&#x3D; undefined &amp;&amp; window.chrome.webview &#x3D;&#x3D;&#x3D; undefined)\n        return\n    &#x2F;&#x2F; 將訊息以json格式傳送\n    window.chrome.webview.postMessage(&#123;&quot;message&quot;: message.value&#125;)\n&#125;</code></pre>\n\n<h4 id=\"Flutter端\"><a href=\"#Flutter端\" class=\"headerlink\" title=\"Flutter端\"></a>Flutter端</h4><p>先宣告<code>WebviewController</code></p>\n<pre class=\"line-numbers language-dart\" data-language=\"dart\"><code class=\"language-dart\">import &#39;package:webview_windows&#x2F;webview_windows.dart&#39; as wweb;\n\nfinal _winController &#x3D; wweb.WebviewController();</code></pre>\n\n<p>並寫一個<code>initWindowsWebView()</code>的function來初始Webview，並在Webview載入完成時監聽Web端訊息</p>\n<pre class=\"line-numbers language-dart\" data-language=\"dart\"><code class=\"language-dart\">Future&lt;void&gt; initWindowsWebView() async &#123;\n    if (!Platform.isWindows) return;\n    await _winController.initialize();\n    String data &#x3D; await rootBundle.loadString(&quot;assets&#x2F;webpages&#x2F;index.html&quot;);\n    await _winController.loadStringContent(data);\n    while (!_winController.value.isInitialized) &#123;\n        sleep(Duration(milliseconds: 200));\n    &#125;\n    setState(() &#123;&#125;);\n    &#x2F;&#x2F; 等待Webview載入完成\n    await for (wweb.LoadingState value in _winController.loadingState) &#123;\n        if (value.toString() &#x3D;&#x3D; &quot;LoadingState.navigationCompleted&quot;) &#123;\n            &#x2F;&#x2F; 監聽Web端訊息\n            _winController.webMessage.listen((args) async &#123;\n                &#x2F;&#x2F; args為接收到的訊息(e.g. &#123;&quot;message&quot;: &quot;Hi! I&#39;m web message.&quot;&#125;)\n                &#x2F;&#x2F; 收到訊息動作（彈出對話框）\n                showDialog(\n                    context: context,\n                    builder: (context) &#123;\n                        return AlertDialog(\n                            title: Text(&quot;Message from Web&quot;),\n                            content: Text(&quot;$&#123;args[&quot;message&quot;]&#125;&quot;),\n                        );\n                    &#125;,\n                );\n            &#125;);\n        &#125;\n    &#125;\n&#125;</code></pre>\n\n<p>最後在<code>initState()</code>時呼叫<code>initWindowsWebView()</code>，並在離開時關閉<code>WebviewController</code></p>\n<pre class=\"line-numbers language-dart\" data-language=\"dart\"><code class=\"language-dart\">@override\nvoid initState() &#123;\n    super.initState();\n    initWindowsWebView();\n&#125;\n\n@override\nvoid dispose() &#123;\n    super.dispose();\n    _winController.dispose(); &#x2F;&#x2F; 增加這行來關閉WebviewController\n&#125;</code></pre>\n\n<h3 id=\"Flutter-to-Web-將Flutter訊息傳至Web\"><a href=\"#Flutter-to-Web-將Flutter訊息傳至Web\" class=\"headerlink\" title=\"Flutter to Web - 將Flutter訊息傳至Web\"></a>Flutter to Web - 將Flutter訊息傳至Web</h3><h4 id=\"Web端-1\"><a href=\"#Web端-1\" class=\"headerlink\" title=\"Web端\"></a>Web端</h4><p>在JavaScipt加入監聽Flutter訊息的Code</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\">const textarea &#x3D; document.getElementById(&quot;flutter&quot;) &#x2F;&#x2F; 顯示Flutter訊息的textarea元件\n&#x2F;&#x2F; 若無Flutter通道則不監聽\nif (window.chrome !&#x3D;&#x3D; undefined &amp;&amp; window.chrome.webview !&#x3D;&#x3D; undefined) &#123;\n    window.chrome.webview.addEventListener(&#39;message&#39;, function(e) &#123;\n        &#x2F;&#x2F; 若收到到訊息動作\n        textarea.innerHTML +&#x3D; (e.data.message + &quot;\\n&quot;)\n    &#125;)\n&#125;</code></pre>\n<h4 id=\"Flutter端-1\"><a href=\"#Flutter端-1\" class=\"headerlink\" title=\"Flutter端\"></a>Flutter端</h4><p>宣告一個<code>TextEditingController</code>來輸入訊息，並在離開時關閉</p>\n<pre class=\"line-numbers language-dart\" data-language=\"dart\"><code class=\"language-dart\">final _textController &#x3D; TextEditingController(text: &quot;Hi! I&#39;m flutter message.&quot;);\n\n@override\nvoid dispose() &#123;\n    super.dispose();\n    _textController.dispose(); &#x2F;&#x2F; 增加這行來關閉TextEditingController\n&#125;</code></pre>\n\n<p>新增一個<code>IconButton</code>元件來傳送訊息至Web</p>\n<pre class=\"line-numbers language-dart\" data-language=\"dart\"><code class=\"language-dart\">IconButton(\n    icon: Icon(Icons.send),\n    onPressed: () &#123;\n        showDialog(\n            context: context,\n            builder: (context) &#123;\n                return AlertDialog(\n                    title: Text(&quot;Send Message to Web&quot;),\n                    content: TextField(\n                        controller: _textController,\n                    ),\n                    actions: [\n                        TextButton(\n                            child: Text(&quot;Send&quot;),\n                            onPressed: () &#123;\n                                &#x2F;&#x2F; 將欲傳送至Web的訊息宣告為data\n                                Map data &#x3D; &#123;&quot;message&quot;: _textController.text&#125;;\n                                &#x2F;&#x2F; 將data傳送至Web\n                                _winController.postWebMessage(&#39;$&#123;jsonEncode(data)&#125;&#39;);\n                                Navigator.of(context).pop();\n                            &#125;,\n                        ),\n                    ],\n                );\n            &#125;,\n        );\n    &#125;,\n)</code></pre>\n\n<h3 id=\"大坑1-UTF8編碼問題\"><a href=\"#大坑1-UTF8編碼問題\" class=\"headerlink\" title=\"大坑1 - UTF8編碼問題\"></a>大坑1 - UTF8編碼問題</h3><p>在webview_windows\b 0.0.8（目前最新）這個版本中，尚未對UTF8編碼做特殊處理，也就是如果在溝通上使用中文字的話則會出現問題，所以我就研究了一下套件源碼，經歷了千辛萬苦\b(?，終於讓套件用中文溝通了～</p>\n<p>首先，我們先進入webview_windows的檔案位置，通常會在Flutter SDK位置下的資料夾內<br><em>e.g. …/flutter/.pub-cache/hosted/pub.dartlang.org/webview_windows-0.0.8/windows/</em></p>\n<p>接著，找到<code>webview_bridge.cc</code>檔案並修改裡面的<code>towstring</code> function</p>\n<pre class=\"line-numbers language-c++\" data-language=\"c++\"><code class=\"language-c++\">std::wstring towstring(std::string_view str) &#123;\n  if (str.empty()) &#123;\n    return std::wstring();\n  &#125;\n  int utf16Length &#x3D; ::MultiByteToWideChar(CP_UTF8, MB_ERR_INVALID_CHARS, str.data(), static_cast&lt;int&gt;(str.length()), nullptr, 0);\n  if (utf16Length &#x3D;&#x3D; 0) &#123;\n    return std::wstring();\n  &#125;\n  std::wstring utf16;\n  utf16.resize(utf16Length);\n  int convertLength &#x3D; ::MultiByteToWideChar(CP_UTF8, MB_ERR_INVALID_CHARS, str.data(), static_cast&lt;int&gt;(str.length()), utf16.data(), utf16Length);\n  if (convertLength &#x3D;&#x3D; 0) &#123;\n    return std::wstring();\n  &#125;\n  return utf16;\n&#125;</code></pre>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>修改後，此function會將傳至Web的值變為正確的UTF8編碼</p></blockquote>\n<p>接下來，我們再來修改<code>webview.cc</code>中的<code>webview_-&gt;add_WebMessageReceived</code></p>\n<pre class=\"line-numbers language-c++\" data-language=\"c++\"><code class=\"language-c++\">webview_-&gt;add_WebMessageReceived(\n  Callback&lt;ICoreWebView2WebMessageReceivedEventHandler&gt;(\n      [this](ICoreWebView2* sender,\n              ICoreWebView2WebMessageReceivedEventArgs* args) -&gt; HRESULT &#123;\n        wil::unique_cotaskmem_string wmessage;\n        if (web_message_received_callback_ &amp;&amp;\n            args-&gt;get_WebMessageAsJson(&amp;wmessage) &#x3D;&#x3D; S_OK) &#123;\n          const std::string message &#x3D;  CW2A(wmessage.get(), CP_UTF8); &#x2F;&#x2F; 加入CP_UTF8指定UTF8編碼\n          web_message_received_callback_(message);\n        &#125;\n\n        return S_OK;\n      &#125;)\n      .Get(),\n  &amp;event_registrations_.web_message_received_token_);</code></pre>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>修改後，Web接收到的值經過C++後中文就不會變亂碼了</p></blockquote>\n<h3 id=\"Bonus-回傳Web的console-log訊息至Flutter端\"><a href=\"#Bonus-回傳Web的console-log訊息至Flutter端\" class=\"headerlink\" title=\"Bonus - 回傳Web的console.log訊息至Flutter端\"></a>Bonus - 回傳Web的console.log訊息至Flutter端</h3><p>再測試時，常常需要用到<code>console.log</code>來確認程式碼有沒有問題，所以我們就可以直接劫持console.log訊息，將他傳至Flutter端。</p>\n<h4 id=\"Web端-2\"><a href=\"#Web端-2\" class=\"headerlink\" title=\"Web端\"></a>Web端</h4><pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\">console.log &#x3D; function (txt) &#123;\n    let messages &#x3D; []\n    &#x2F;&#x2F; arguments為console.log輸出訊息\n    for (var i &#x3D; 0; i &lt; arguments.length; i++) &#123;\n        messages.push(arguments[i]) &#x2F;&#x2F; 將訊息存至messages\n    &#125;\n    &#x2F;&#x2F; 將messages傳至Flutter端\n    window.chrome.webview.postMessage(\n        &#123; \n            &quot;method&quot;: &quot;console&quot;, &#x2F;&#x2F; 宣告來源，方便Flutter端判斷\n            &quot;message&quot;: messages.join(&quot; &quot;) \n        &#125;\n    )\n&#125;</code></pre>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p><code>console.log</code>被劫持後就不會印在主控台(Console)上了哦！畢竟它被綁架了麻～</p></blockquote>\n<h4 id=\"Flutter端-2\"><a href=\"#Flutter端-2\" class=\"headerlink\" title=\"Flutter端\"></a>Flutter端</h4><p>我們一樣在<code>initWindowsWebView()</code>內監聽，只是在多加判斷它是不是console的訊息，如果是的話則輸出至Flutter Console。</p>\n<pre class=\"line-numbers language-dart\" data-language=\"dart\"><code class=\"language-dart\">await for (wweb.LoadingState value in _winController.loadingState) &#123;\n    if (value.toString() &#x3D;&#x3D; &quot;LoadingState.navigationCompleted&quot;) &#123;\n        &#x2F;&#x2F; 監聽Web端訊息\n        _winController.webMessage.listen((args) async &#123;\n            &#x2F;&#x2F; args為接收到的訊息(e.g. &#123;&quot;message&quot;: &quot;Hi! I&#39;m web message.&quot;&#125;)\n            if (args[&quot;method&quot;] &#x3D;&#x3D; &quot;console&quot;) &#123;\n                &#x2F;&#x2F; 若為console訊息動作\n                print(args[&quot;message&quot;]);\n            &#125; else &#123;\n                &#x2F;&#x2F; 收到訊息動作（彈出對話框）\n                showDialog(\n                    context: context,\n                    builder: (context) &#123;\n                        return AlertDialog(\n                            title: Text(&quot;Message from Web&quot;),\n                            content: Text(&quot;$&#123;args[&quot;message&quot;]&#125;&quot;),\n                        );\n                    &#125;,\n                );\n            &#125;\n            \n        &#125;);\n    &#125;\n&#125;</code></pre>\n\n<h3 id=\"感動到哭的成果時間\"><a href=\"#感動到哭的成果時間\" class=\"headerlink\" title=\"感動到哭的成果時間\"></a>感動到哭的成果時間</h3><script src=\"https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js\"></script>\n<p><lottie-player src=\"https://assets9.lottiefiles.com/packages/lf20_xkbhgbld.json\"  background=\"transparent\"  speed=\"1\"  style=\"width: 300px; height: 300px;\"  loop autoplay></lottie-player></p>\n<p><em>忘記備份成果了，等有Windows電腦後再回來放…</em></p>\n<h3 id=\"Full-Code\"><a href=\"#Full-Code\" class=\"headerlink\" title=\"Full Code\"></a>Full Code</h3><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>完整程式碼請至<a href=\"https://github.com/cailirl980519/sample_windows_webview\">sample_windows_webview</a></p></blockquote>\n<h4 id=\"index-html\"><a href=\"#index-html\" class=\"headerlink\" title=\"index.html\"></a>index.html</h4><pre class=\"line-numbers language-html\" data-language=\"html\"><code class=\"language-html\">&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n\t&lt;meta charset&#x3D;&quot;utf-8&quot;&gt;\n    &lt;link href&#x3D;&quot;https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;npm&#x2F;bootstrap@5.0.2&#x2F;dist&#x2F;css&#x2F;bootstrap.min.css&quot; rel&#x3D;&quot;stylesheet&quot; integrity&#x3D;&quot;sha384-EVSTQN3&#x2F;azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC&quot; crossorigin&#x3D;&quot;anonymous&quot;&gt;\n\t&lt;title&gt;WebView Sample for Windows&lt;&#x2F;title&gt;\n&lt;&#x2F;head&gt;\n&lt;body&gt;\n    &lt;h1 class&#x3D;&quot;text-center&quot;&gt;Communicate With Flutter&lt;&#x2F;h1&gt;\n    &lt;div&gt;\n        &lt;script src&#x3D;&quot;https:&#x2F;&#x2F;unpkg.com&#x2F;@lottiefiles&#x2F;lottie-player@latest&#x2F;dist&#x2F;lottie-player.js&quot;&gt;&lt;&#x2F;script&gt;\n        &lt;lottie-player class&#x3D;&quot;mx-auto&quot; src&#x3D;&quot;https:&#x2F;&#x2F;assets1.lottiefiles.com&#x2F;packages&#x2F;lf20_zwykwl1i.json&quot;  background&#x3D;&quot;transparent&quot;  speed&#x3D;&quot;1&quot;  style&#x3D;&quot;width: 300px; height: 300px;&quot;  loop autoplay&gt;&lt;&#x2F;lottie-player&gt;\n    &lt;&#x2F;div&gt;\n    &lt;div class&#x3D;&quot;row justify-content-around&quot;&gt;\n        &lt;div class&#x3D;&quot;col-5&quot;&gt;\n            &lt;h3&gt;Example 1.&lt;&#x2F;h3&gt;\n            &lt;input id&#x3D;&quot;web_message&quot; class&#x3D;&quot;w-100 mb-2&quot; type&#x3D;&quot;text&quot; value&#x3D;&quot;Hi! I&#39;m web message.&quot;&gt;\n            &lt;button type&#x3D;&quot;button&quot; class&#x3D;&quot;btn btn-primary&quot; onclick&#x3D;&quot;sendMessage()&quot;&gt;Send Message to Flutter&lt;&#x2F;button&gt;\n        &lt;&#x2F;div&gt;\n        &lt;div class&#x3D;&quot;col-5&quot;&gt;\n            &lt;h3&gt;Example 2.&lt;&#x2F;h3&gt;\n            &lt;p&gt;Message from Dart:&lt;&#x2F;p&gt;\n            &lt;textarea id&#x3D;&quot;flutter&quot; class&#x3D;&quot;w-100&quot; disabled&#x3D;&quot;true&quot; style&#x3D;&quot;height: 30vw;&quot;&gt;&lt;&#x2F;textarea&gt;\n        &lt;&#x2F;div&gt;\n    &lt;&#x2F;div&gt;\n&lt;&#x2F;body&gt;\n&lt;script&gt;\n    const message &#x3D; document.getElementById(&quot;web_message&quot;)\n    function sendMessage() &#123;\n        if (window.chrome &#x3D;&#x3D;&#x3D; undefined &amp;&amp; window.chrome.webview &#x3D;&#x3D;&#x3D; undefined)\n            return\n        window.chrome.webview.postMessage(&#123;&quot;message&quot;: message.value&#125;)\n    &#125;\n    const textarea &#x3D; document.getElementById(&quot;flutter&quot;)\n    if (window.chrome !&#x3D;&#x3D; undefined &amp;&amp; window.chrome.webview !&#x3D;&#x3D; undefined) &#123;\n        window.chrome.webview.addEventListener(&#39;message&#39;, function(e) &#123;\n            textarea.innerHTML +&#x3D; (e.data.message + &quot;\\n&quot;)\n        &#125;)\n    &#125;\n&lt;&#x2F;script&gt;\n&lt;&#x2F;html&gt;</code></pre>\n\n<h4 id=\"index-html-1\"><a href=\"#index-html-1\" class=\"headerlink\" title=\"index.html\"></a>index.html</h4><pre class=\"line-numbers language-dart\" data-language=\"dart\"><code class=\"language-dart\">import &#39;dart:convert&#39;;\nimport &#39;dart:io&#39;;\n\nimport &#39;package:flutter&#x2F;material.dart&#39;;\nimport &#39;package:flutter&#x2F;services.dart&#39;;\nimport &#39;package:lottie&#x2F;lottie.dart&#39;;\nimport &#39;package:webview_windows&#x2F;webview_windows.dart&#39; as wweb;\n\nclass WebView2Page extends StatefulWidget &#123;\n  const WebView2Page(&#123;Key? key&#125;) : super(key: key);\n\n  @override\n  _WebView2PageState createState() &#x3D;&gt; _WebView2PageState();\n&#125;\n\nclass _WebView2PageState extends State&lt;WebView2Page&gt; &#123;\n  final _winController &#x3D; wweb.WebviewController();\n  final _textController &#x3D;\n      TextEditingController(text: &quot;Hi! I&#39;m flutter message.&quot;);\n\n  Future&lt;void&gt; initWindowsWebView() async &#123;\n    if (!Platform.isWindows) return;\n    await _winController.initialize();\n    String data &#x3D; await rootBundle.loadString(&quot;assets&#x2F;webpages&#x2F;index.html&quot;);\n    await _winController.loadStringContent(data);\n    while (!_winController.value.isInitialized) &#123;\n      sleep(Duration(milliseconds: 200));\n    &#125;\n    setState(() &#123;&#125;);\n    await for (wweb.LoadingState value in _winController.loadingState) &#123;\n      if (value.toString() &#x3D;&#x3D; &quot;LoadingState.navigationCompleted&quot;) &#123;\n        _winController.webMessage.listen((args) async &#123;\n          showDialog(\n            context: context,\n            builder: (context) &#123;\n              return AlertDialog(\n                title: Text(&quot;Message from Web&quot;),\n                content: Text(&quot;$&#123;args[&quot;message&quot;]&#125;&quot;),\n              );\n            &#125;,\n          );\n        &#125;);\n      &#125;\n    &#125;\n  &#125;\n\n  Widget webView() &#123;\n    if (!Platform.isWindows)\n      return Center(\n        child: Text(&quot;not Support&quot;),\n      );\n    if (!_winController.value.isInitialized)\n      return Center(\n        child: Lottie.network(\n            &quot;https:&#x2F;&#x2F;assets9.lottiefiles.com&#x2F;datafiles&#x2F;bEYvzB8QfV3EM9a&#x2F;data.json&quot;),\n      );\n    return Container(\n      child: wweb.Webview(_winController),\n    );\n  &#125;\n\n  @override\n  void initState() &#123;\n    super.initState();\n    initWindowsWebView();\n  &#125;\n\n  @override\n  void dispose() &#123;\n    super.dispose();\n    _winController.dispose();\n    _textController.dispose();\n  &#125;\n\n  @override\n  Widget build(BuildContext context) &#123;\n    return Scaffold(\n      appBar: AppBar(\n        title: Text(&quot;Sample2&quot;),\n        actions: [\n          IconButton(\n            icon: Icon(Icons.send),\n            onPressed: () &#123;\n              showDialog(\n                context: context,\n                builder: (context) &#123;\n                  return AlertDialog(\n                    title: Text(&quot;Send Message to Web&quot;),\n                    content: TextField(\n                      controller: _textController,\n                    ),\n                    actions: [\n                      TextButton(\n                        child: Text(&quot;Send&quot;),\n                        onPressed: () &#123;\n                          Map data &#x3D; &#123;\n                            &quot;message&quot;: _textController.text,\n                          &#125;;\n                          print(data);\n                          _winController.postWebMessage(&#39;$&#123;jsonEncode(data)&#125;&#39;);\n                          Navigator.of(context).pop();\n                        &#125;,\n                      ),\n                    ],\n                  );\n                &#125;,\n              );\n            &#125;,\n          )\n        ],\n      ),\n      body: webView(),\n    );\n  &#125;\n&#125;</code></pre>\n","text":"前幾天介紹了webview_windows的基本使用，我們已經學會了如何在Flutter App裡開啟網頁，但通常如果是開啟自己的網頁的話，可能有些Web功能就需要跟Flutter端溝通。今天要來學習如何運用webview_windows來接收網頁的訊息及從Flutter傳訊息至...","link":"","photos":[],"count_time":{"symbolsCount":"17k","symbolsTime":"15 mins."},"categories":[{"name":"Flutter","slug":"Flutter","count":4,"path":"api/categories/Flutter.json"}],"tags":[{"name":"App","slug":"App","count":5,"path":"api/tags/App.json"},{"name":"Flutter","slug":"Flutter","count":4,"path":"api/tags/Flutter.json"},{"name":"Dart","slug":"Dart","count":4,"path":"api/tags/Dart.json"},{"name":"Windows","slug":"Windows","count":3,"path":"api/tags/Windows.json"},{"name":"Edge Webview2","slug":"Edge-Webview2","count":2,"path":"api/tags/Edge-Webview2.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%89%8D%E7%BD%AE%E4%BD%9C%E6%A5%AD\"><span class=\"toc-text\">前置作業</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Web-to-Flutter-%E5%B0%87Web%E8%A8%8A%E6%81%AF%E5%82%B3%E8%87%B3Flutter\"><span class=\"toc-text\">Web to Flutter - 將Web訊息傳至Flutter</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#Web%E7%AB%AF\"><span class=\"toc-text\">Web端</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#Flutter%E7%AB%AF\"><span class=\"toc-text\">Flutter端</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Flutter-to-Web-%E5%B0%87Flutter%E8%A8%8A%E6%81%AF%E5%82%B3%E8%87%B3Web\"><span class=\"toc-text\">Flutter to Web - 將Flutter訊息傳至Web</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#Web%E7%AB%AF-1\"><span class=\"toc-text\">Web端</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#Flutter%E7%AB%AF-1\"><span class=\"toc-text\">Flutter端</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%A4%A7%E5%9D%911-UTF8%E7%B7%A8%E7%A2%BC%E5%95%8F%E9%A1%8C\"><span class=\"toc-text\">大坑1 - UTF8編碼問題</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Bonus-%E5%9B%9E%E5%82%B3Web%E7%9A%84console-log%E8%A8%8A%E6%81%AF%E8%87%B3Flutter%E7%AB%AF\"><span class=\"toc-text\">Bonus - 回傳Web的console.log訊息至Flutter端</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#Web%E7%AB%AF-2\"><span class=\"toc-text\">Web端</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#Flutter%E7%AB%AF-2\"><span class=\"toc-text\">Flutter端</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%84%9F%E5%8B%95%E5%88%B0%E5%93%AD%E7%9A%84%E6%88%90%E6%9E%9C%E6%99%82%E9%96%93\"><span class=\"toc-text\">感動到哭的成果時間</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Full-Code\"><span class=\"toc-text\">Full Code</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#index-html\"><span class=\"toc-text\">index.html</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#index-html-1\"><span class=\"toc-text\">index.html</span></a></li></ol></li></ol>","author":{"name":"Shirley","slug":"shirley","avatar":"https://i.imgur.com/lM0jHtF.png","link":"/","description":"記錄雜七雜八的秘密基地","socials":{"github":"https://github.com/cailirl980519","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"book":{"icon":"fa fa-envelope","link":"mailto://cailirl980519@gmail.com"}}}},"mapped":true,"prev_post":{"title":"透過Pointer events偵測多點觸控","uid":"13b3e19acd1214ea9632a399d02fbfc3","slug":"js-zoom-by-pointer","date":"2021-10-22T06:17:53.000Z","updated":"2021-12-16T01:39:02.565Z","comments":true,"path":"api/articles/js-zoom-by-pointer.json","keywords":"Flutter, Dart, MSIX, webview_windows, Javascript, Web, VBA, Excel","cover":null,"text":"在多平台的時代，瀏覽器的輸入事件也越來越多樣化，從早期只有滑鼠可以點擊畫面，到現在有了觸控、觸控筆，於是Pointer events誕生了，它不僅保留了Mouse events的常見屬性，還多了可以追蹤各種類型指針事件的功能，使程式碼可以相容各種不同類型的裝置。 Pointer ...","link":"","photos":[],"count_time":{"symbolsCount":"2.7k","symbolsTime":"2 mins."},"categories":[{"name":"Javascript","slug":"Javascript","count":2,"path":"api/categories/Javascript.json"}],"tags":[{"name":"Javascript","slug":"Javascript","count":2,"path":"api/tags/Javascript.json"},{"name":"Web","slug":"Web","count":3,"path":"api/tags/Web.json"},{"name":"Pointer events","slug":"Pointer-events","count":1,"path":"api/tags/Pointer-events.json"}],"author":{"name":"Shirley","slug":"shirley","avatar":"https://i.imgur.com/lM0jHtF.png","link":"/","description":"記錄雜七雜八的秘密基地","socials":{"github":"https://github.com/cailirl980519","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"book":{"icon":"fa fa-envelope","link":"mailto://cailirl980519@gmail.com"}}}}},"next_post":{"title":"那些封裝Flutter for Windows Desktop踩過的坑","uid":"3c82a08cc7dab768d26061638904f16f","slug":"flutter-windows-msix","date":"2021-10-05T09:58:52.000Z","updated":"2022-02-16T01:41:50.248Z","comments":true,"path":"api/articles/flutter-windows-msix.json","keywords":"Flutter, Dart, MSIX, webview_windows, Javascript, Web, VBA, Excel","cover":[],"text":"當我用Flutter寫完一個App後，想要將這個App封裝成Window的MSIX應用程式，但發現網上Windows Desktop的教學屈指可數，且多數都是英文，於是就產生了想法把它記錄下來，把坑填好，以免以後要用到忘記踩過的坑！ 前置作業 一個欲封裝的Flutter專案 一台...","link":"","photos":[],"count_time":{"symbolsCount":"2.8k","symbolsTime":"3 mins."},"categories":[{"name":"Flutter","slug":"Flutter","count":4,"path":"api/categories/Flutter.json"}],"tags":[{"name":"App","slug":"App","count":5,"path":"api/tags/App.json"},{"name":"Flutter","slug":"Flutter","count":4,"path":"api/tags/Flutter.json"},{"name":"Dart","slug":"Dart","count":4,"path":"api/tags/Dart.json"},{"name":"Windows","slug":"Windows","count":3,"path":"api/tags/Windows.json"},{"name":"MSIX","slug":"MSIX","count":1,"path":"api/tags/MSIX.json"}],"author":{"name":"Shirley","slug":"shirley","avatar":"https://i.imgur.com/lM0jHtF.png","link":"/","description":"記錄雜七雜八的秘密基地","socials":{"github":"https://github.com/cailirl980519","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"book":{"icon":"fa fa-envelope","link":"mailto://cailirl980519@gmail.com"}}}}}}